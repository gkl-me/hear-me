<%- include('nav') %>


<div class="signup d-flex justify-content-center my-5 ">
    <div class="signup-form-container d-flex flex-column  text-center ">
        <h2 class="text-center">Create an account</h2>
        <p class="text-center">Enter your email to sign up for this app</p>
        <form action="/user/signup" method="post" id="signup-form" class="needs-validation" novalidate>
            <div class="form-group">
                <input type="text" class="form-control form-input" id="name-signup" name="name" placeholder="Full Name" autocomplete="off" required>
                <div class="invalid-feedback">
                    Please enter your full name.
                </div>
            </div>
            <div class="form-group">
                <input type="email" class="form-control form-input" id="email-signup" name="email" placeholder="Email Address" autocomplete="off" required>
                <div class="invalid-feedback">
                    Please enter your email.
                </div>
            </div>
            <div class="form-group">
                <input type="text" class="form-control form-input" id="phone-signup" name="phone" placeholder="Phone Number" autocomplete="off" required>
                <div class="invalid-feedback">
                    Please enter your phone.
                </div>
            </div>

            <div class="form-group position-relative d-flex align-items-center">
                <input type="password" class="form-control form-input" id="pass-signup" name="password" placeholder="Password" required>
                <span id="toggle-password" onclick="togglePassword('pass-signup',this)" class="me-1 password-toggle align-content-center position-absolute end-0"><i class="bi bi-eye"></i></span>
                <div class="invalid-feedback">
                    Please enter your password.
                </div>
            </div>            


            <div class="form-group position-relative d-flex align-items-center">
                <input type="password" class="form-control form-input" id="confirm-signup" placeholder="Confirm Password" required>
                <span id="toggle-password" onclick="togglePassword('confirm-signup',this)" class="me-1 password-toggle align-content-center position-absolute end-0"><i class="bi bi-eye"></i></span>
                <div class="invalid-feedback">
                    Password must start with a capital letter, be at least 8 characters long
                </div>
            </div>

            <button type="submit" id="signup-button" class="btn submit-btn">Sign up with email</button>
            <p class="text-center text-black-50  mt-3">Already have an account? <a href="/user/login">Login</a></p>
            <hr>
            <button type="button" class="btn submit-btn-light">
                <img width="25px" height="25px" src="/public/assets/google-icon" alt="">
                <a href="/user/auth/google">Continue with Google</a>
            </button>
            <p class="text-center mt-3">
                By clicking continue, you agree to our <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a>
            </p>
        </form>
    </div>
</div>


<script>


//toggle password eye 

    function togglePassword(fieldId, toggleElement) {
        const passwordField = document.getElementById(fieldId);
        const type = passwordField.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordField.setAttribute('type', type);
        toggleElement.innerHTML = type === 'password' ? '<i class="bi bi-eye"></i>' : '<i class="bi bi-eye-slash"></i>';
    }

    (function () {
    const form = document.getElementById('signup-form');

    form.addEventListener('submit', function(event) {
        let isValid = true;

        // Name validation
        const nameInput = document.getElementById('name-signup');
        if (nameInput.value.trim() === "") {
            isValid = false;
            nameInput.setCustomValidity("Please enter your full name without leading or trailing spaces.");
        } else {
            nameInput.setCustomValidity("");
        }

        // Phone validation
        const phoneInput = document.getElementById('phone-signup');
        const phoneRegex = /^\d{10}$/;
        if (!phoneRegex.test(phoneInput.value)) {
            isValid = false;
            phoneInput.setCustomValidity("Please enter a valid phone number with 10 digits.");
        } else {
            phoneInput.setCustomValidity("");
        }

        // Password validation
        const passwordInput = document.getElementById('pass-signup');
        const passwordValue = passwordInput.value;
        const passwordRegex = /^[A-Z][A-Za-z\d@$!%*?&]{7,}$/;
        if (!passwordRegex.test(passwordValue)) {
            isValid = false;
            passwordInput.setCustomValidity("Password must start with a capital letter, be at least 8 characters long, and contain no spaces.");
        } else {
            passwordInput.setCustomValidity("");
        }

        // Confirm password validation
        const confirmPasswordInput = document.getElementById('confirm-signup');
        if (confirmPasswordInput.value !== passwordValue) {
            isValid = false;
            confirmPasswordInput.setCustomValidity("Passwords do not match.");
        } else {
            confirmPasswordInput.setCustomValidity("");
        }

        if (!isValid || !form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
        }

        form.classList.add('was-validated');
    });

})();

</script>

<%- include('../admin/adminFooter') %>